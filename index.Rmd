---
title: "Evolution of the NBA In the Past Decade"
author: "Teddy B., Kevin J., Kevin M."
date: "`r Sys.Date()`"
output:
  rmdformats::readthedown:
    thumbnails: false
    highlight: NULL
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE, fig.align="center")
library(tidyverse)
library(dplyr)
library(tidyr)
library(kableExtra)
```

# Introduction

# Shot Data and Mapping

## Shot Data using `ballr` package and the NBA API

# Player Season Data

# Shot Type Graph and Table

```{r, line_graph, echo = FALSE, message = FALSE}
stat_names <- c("In The Paint (Non-RA)", "Mid-Range", "Restricted Area", "Three-pointers")

season_zones_table <- read.csv("Data/season_zones_table.csv") %>%
  select(-c(X))
for(i in 1:4){
  names(season_zones_table)[names(season_zones_table) == names(season_zones_table)[i + 1]] <- stat_names[i]
}
season_zones_table %>%
  mutate(
    across(c(2:5), .fns = ~./total)
  ) %>%
  select(-c(total)) %>%
  pivot_longer(
    cols = 2:5,
    names_to = "shot_zone",
    values_to = "percentage",
  ) %>%
  rowwise() %>%
  mutate(year = as.numeric(strsplit(season, "-")[[1]][1])) %>%
  ggplot(mapping = aes(x = year, y = percentage, color = shot_zone)) +
  geom_line() + 
  scale_y_continuous(labels = scales::percent) +
  scale_x_continuous(breaks = c(2010, 2012, 2014, 2016, 2018, 2020)) + 
  labs(
    title = "\n Percentages of Shots Taken In Each Area Each Season",
    subtitle = "From 2010-2021",
    color = "Shot Zone Area",
    y = "\nPercentages\n",
    x = "\nYear\n"
  )
```

```{r, table, echo = FALSE}
season_zones_table %>% 
  rename(Season = season) %>%
  kable()
```

# Heat Map

![Heatmap of all shots in the NBA in the past decade](heatmap.gif)


# You can even create tabs if you want! {.tabset .tabset-fade .tabset-pills}

## Bulleted list

You can make a bulleted list like this:

- item 1
- item 2
- item 3


## Numbered list

You can make a numbered list like this

1. First thing I want to say
2. Second thing I want to say
3. Third thing I want to say

